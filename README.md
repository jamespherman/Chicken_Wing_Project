# Chicken Wing Surgical Cognition Analysis

## Project Overview

This project analyzes gaze data from a surgical simulation performed on a chicken wing model. It processes raw gaze data and scene video from Tobii Pro Glasses 3, using ArUco markers to correct for perspective changes. The output is a stabilized set of gaze coordinates mapped onto a consistent frame of reference, along with detailed visualizations for cognitive and performance analysis.

## Data Pipeline

The data processing pipeline is designed to transform raw experimental data into actionable insights, including processed datasets and visual reports.

1.  **Raw Data (`/data/raw`):** Each subject's raw data, including `gazedata.gz`, `scenevideo.mp4`, and other metadata, is stored in a unique subdirectory within `/data/raw`.
2.  **Processing (`/src`):** The scripts in the `/src` directory orchestrate the analysis. The main script, `batch_process_with_heatmaps.py`, reads the raw data, performs perspective correction using `gaze_on_perspective_corrected_frames_refactored.py`, and generates a final, high-resolution gaze CSV using `create_final_csv_refactored.py`.
3.  **Processed Data (`/data/processed`):** The pipeline outputs cleaned and transformed data into corresponding subdirectories in `/data/processed`. This includes the final gaze data CSV, intermediate files, and the transformation history (`.npy` file).
4.  **Reports & Visualizations (`/reports`):** The analysis generates visual reports and logs. Heatmaps, scatter plots, and other visualizations are saved in `/reports/figures`, while processing logs and summary statistics are stored in `/reports/logs`.

## Usage

To process all subjects and generate the corresponding heatmaps and reports, run the main batch processing script from the root directory of the project.

```bash
python3 src/batch_process_with_heatmaps.py
```

The script will automatically discover subject folders in `data/raw`, process them, and place the outputs in the `data/processed` and `reports` directories.

## Project Structure

The project is organized into the following top-level directories:

-   **/src**: Contains all Python scripts for data processing, analysis, and visualization. The main entry point for batch processing is `src/batch_process_with_heatmaps.py`.
-   **/data**: Holds all project data, separated into two subdirectories:
    -   `raw`: For the original, unprocessed data from each subject.
    -   `processed`: For the cleaned, transformed, and analyzed data generated by the scripts.
-   **/reports**: Contains all output reports from the analysis, including:
    -   `figures`: Visualizations such as heatmaps, scatter plots, and contour plots.
    -   `logs`: Detailed logs for each processing run and summary reports.
